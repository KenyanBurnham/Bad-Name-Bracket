
  <!DOCTYPE html>
  <html lang="en">
  <body>
  <script src="https://unpkg.com/gojs@2.2.9/release/go.js"></script>

  <div id="allSampleContent" class="p-4 w-full">
    <script id="code">
/**
Instructions:
1. Download the totally valid names file as a CSV
2. Go to https://www.convertcsv.com/csv-to-json.htm
3. Input the CSV file and ask for "CTV to JSON array"
**/
//Use this link to generate a
    let names = [
"Michael Postar Johnston *sponsored by Affordable Storage",
"Eustace Johnston",
"Reagor Dykes Johnston",
"Lie Fire Johnston",
"Planet Marfa Johnston",
"Ayewilleet Minaybor Johnston",
"Corona Fauci Johnston",
"Kung Flu Johnston",
"Donald Johnston",
"X Ã† A-13 Johnston",
"Jean Stan Johnston",
"Action Johnston",
"Kaye Leigh Johnston",
"Johnathon \"John\" Stan Johnston",
"Daire Reck Johnston",
"Daire Rick-Alan Johnston",
"Dirk Johnston",
"Richard Johnston",
"Just the Letter D Johnston",
"Dee \"Deejay\" Jay Johnston",
"Barry",
"Small Derek Johnston",
"You Child Johnston",
"Johnston, son of Johnston",
"Sport Johnston",
"Johnston VerJohnstonson",
"Dejohnston Johnston",
"Bonus Johnston",
"Kidd Johnston",
"Action Bronson Johnston",
"Shania Twain Rufus Johnston",
"Stevie Irwin Johnston",
"Dijon \"Di\" Johnston",
"Mylegal Property Johnston",
"Mystic Olraspy Johnston",
"Metaphysical Meagon Johnston",
"Governor Abbott Johnston",
"Elle Shimmershimmer Johnston",
"John Johnson Johnston",
"Johnstdaughter Johnston ",
"Jan Johnston",
"Jar Jar \"Triple J\" Johnston",
"Jack Johnston",
"Karek Ranley Johnston",
"Untitled01 Johnston",
"Robert') DROP TABLE Students;-- Johnston",
"Holloway Johnston",
"Derecles Kaylos Johnston",
"Longjohn Johnston",
"Derek Alan Johnston II",
"ðŸ’¯ Johnston",
"Daniel Johnston",
"Chucklefuck Ballsack Johnston I",
"The People's Johnston",
"Agricola Johnston",
"Root Johnston",
"Pandemic Baby Johnston",
"127.0.0.1 Johnston",
"child",
"SN74HCS09-Q1 Johnston",
"Boris Johnston",
"Michael Jackson Johnston",
"Census Johnston",
"Oneinch Johnston",
"Bernard Sanders Johnston",
"[insert SSN#] Johnston",
"Challenge Accepted Johnston",
"Mohammed Johnston",
"Sean Jean Johnston ",
"StJohn Johnston ",
"Footlong Johnston",
"Ragnar Bloodlust Johnston",
"Richard \"Dick\" Inman Johnston",
"Zoom Johnston",
"Feelma Johnston",
"Big Ounce Johnston",
"Billy Ray Johnston",
"Drive Into Deep Left Field By Johnston",
"Thorin Oaken Johnston",
"Ras Trent Johnston",
"Ross Johnston",
"Adolf Johnston",
"Dwayne \"The Rock\" Johnston",
"Jizya Shorts Johnston",
"Porkmac Johnston",
"Oops All Johnston",
"Beto O' Johnston",
"Batman Bin Suparman Johnston",
"Diet Johnston",
"Beezow Doo-Doo Zopittybop-Bop-Bop Johnston",
"Crystal Methany Johnston",
"Long Wiwi Johnston",
"Ash Muncher Johnston",
"Anita Hardcok Johnston",
"Anita Dick Johnston",
"Annie Position Johnston",
"Anya Neeze Johnston",
"Dill Doe Johnston",
"Normous Johnston",
"Harry Johnston",
"Female Presenting Johnston",
"Fox No Items Johnston",
"Don Keydick Johnston",
"Johnson Anne Johnston",
"Clint Torus Johnston",
"Prairie Dog Pete Johnston",
"Chub Bea Johnston",
"Chubby Penguin Johnston",
"Peen-gwyn Johnston",
"CJK5H Johnston",
"$GME Johnston (pronounced Jamie)",
"Benjamin Dover Johnston",
"Heywood Jablome Johnston",
"Devil's Advocate Johnston",
"Ton Johnston",
"Lil' Johnston",
"Mike Leach Johnston",
"Marquis De Johnston",
"Vagabond Johnston",
"McMaster Carr Johnston",
"Cancer Johnston",
"Autosave Johnston",
"Python Johnston",
"LabView Johnston",
"Maude Erna Johnston",
"Lyndon Baynes Johnston",
"Tikka Shack Johnston",
"Craig Johnston"
];

    function init() {

      // Since 2.2 you can also author concise templates with method chaining instead of GraphObject.make
      // For details, see https://gojs.net/latest/intro/buildingObjects.html
      const $ = go.GraphObject.make;  // for conciseness in defining templates

      myDiagram =
        $(go.Diagram, "myDiagramDiv",  // create a Diagram for the DIV HTML element
          {
            "textEditingTool.starting": go.TextEditingTool.SingleClick,
            "textEditingTool.textValidation": isValidScore,
            layout: $(go.TreeLayout, { angle: 180 }),
            "undoManager.isEnabled": true
          });

      // validation function for editing text
      function isValidScore(textblock, oldstr, newstr) {
        if (newstr === "") return true;
        var num = parseInt(newstr, 10);
        return !isNaN(num) && num >= 0 && num < 1000;
      }

      // define a simple Node template
      myDiagram.nodeTemplate =
        $(go.Node, "Auto",
          { selectable: false },
          $(go.Shape, "Rectangle",
            { fill: '#8C8C8C', stroke: null },
            // Shape.fill is bound to Node.data.color
            new go.Binding("fill", "color")),
          $(go.Panel, "Table",
            $(go.RowColumnDefinition, { column: 0, separatorStroke: "black" }),
            $(go.RowColumnDefinition, { column: 1, separatorStroke: "black", background: "#BABABA" }),
            $(go.RowColumnDefinition, { row: 0, separatorStroke: "black" }),
            $(go.RowColumnDefinition, { row: 1, separatorStroke: "black" }),
            $(go.TextBlock, "",
              {
                row: 0,
                wrap: go.TextBlock.None, margin: 5, width: 90,
                isMultiline: false, textAlign: 'left',
                font: '10pt  Segoe UI,sans-serif', stroke: 'white'
              },
              new go.Binding("text", "player1").makeTwoWay()),
            $(go.TextBlock, "",
              {
                row: 1,
                wrap: go.TextBlock.None, margin: 5, width: 90,
                isMultiline: false, textAlign: 'left',
                font: '10pt  Segoe UI,sans-serif', stroke: 'white'
              },
              new go.Binding("text", "player2").makeTwoWay()),
            $(go.TextBlock, "",
              {
                column: 1, row: 0,
                wrap: go.TextBlock.None, margin: 2, width: 25,
                isMultiline: false, editable: true, textAlign: 'center',
                font: '10pt  Segoe UI,sans-serif', stroke: 'black'
              },
              new go.Binding("text", "score1").makeTwoWay()),
            $(go.TextBlock, "",
              {
                column: 1, row: 1,
                wrap: go.TextBlock.None, margin: 2, width: 25,
                isMultiline: false, editable: true, textAlign: 'center',
                font: '10pt  Segoe UI,sans-serif', stroke: 'black'
              },
              new go.Binding("text", "score2").makeTwoWay())
          )
        );

      // define the Link template
      myDiagram.linkTemplate =
        $(go.Link,
          {
            routing: go.Link.Orthogonal,
            selectable: false
          },
          $(go.Shape, { strokeWidth: 2, stroke: 'white' }));


      // Generates the original graph from an array of player names
      function createPairs(players) {
        if (players.length % 2 !== 0) players.push('(empty)');
        var startingGroups = players.length / 2;
        var currentLevel = Math.ceil(Math.log(startingGroups) / Math.log(2));
        var levelGroups = [];
        var currentLevel = Math.ceil(Math.log(startingGroups) / Math.log(2));
        for (var i = 0; i < startingGroups; i++) {
          levelGroups.push(currentLevel + '-' + i);
        }
        var totalGroups = [];
        makeLevel(levelGroups, currentLevel, totalGroups, players);
        return totalGroups;
      }

      function makeLevel(levelGroups, currentLevel, totalGroups, players) {
        currentLevel--;
        var len = levelGroups.length;
        var parentKeys = [];
        var parentNumber = 0;
        var p = '';
        for (var i = 0; i < len; i++) {
          if (parentNumber === 0) {
            p = currentLevel + '-' + parentKeys.length;
            parentKeys.push(p);
          }

          if (players !== null) {
            var p1 = players[i * 2];
            var p2 = players[(i * 2) + 1];
            totalGroups.push({
              key: levelGroups[i], parent: p, player1: p1, player2: p2, parentNumber: parentNumber
            });
          } else {
            totalGroups.push({ key: levelGroups[i], parent: p, parentNumber: parentNumber });
          }

          parentNumber++;
          if (parentNumber > 1) parentNumber = 0;
        }

        // after the first created level there are no player names
        if (currentLevel >= 0) makeLevel(parentKeys, currentLevel, totalGroups, null)
      }

      function makeModel(players) {
        var model = new go.TreeModel(createPairs(players));

        model.addChangedListener(e => {
          if (e.propertyName !== 'score1' && e.propertyName !== 'score2') return;
          var data = e.object;
          if (isNaN(data.score1) || isNaN(data.score2)) return;

          // TODO: What happens if score1 and score2 are the same number?

          // both score1 and score2 are numbers,
          // set the name of the higher-score'd player in the advancing (parent) node
          // if the data.parentNumber is 0, then we set player1 on the parent
          // if the data.parentNumber is 1, then we set player2
          var parent = myDiagram.findNodeForKey(data.parent);
          if (parent === null) return;

          var playerName = parseInt(data.score1) > parseInt(data.score2) ? data.player1 : data.player2;
          if (parseInt(data.score1) === parseInt(data.score2)) playerName = "";
          myDiagram.model.setDataProperty(parent.data, (data.parentNumber === 0 ? "player1" : "player2"), playerName);
        });

        myDiagram.model = model;

        // provide initial scores for at most three pairings
        for (var i = 0; i < Math.min(3, model.nodeDataArray.length); i++) {
          var d = model.nodeDataArray[i];
          if (d.player1 && d.player2) {
            // TODO: doesn't prevent tie scores
            model.setDataProperty(d, "score1", Math.floor(Math.random() * 100));
            model.setDataProperty(d, "score2", Math.floor(Math.random() * 100));
          }
        }
      }

      makeModel(names);
    } // end init
    window.addEventListener('DOMContentLoaded', init);
  </script>

<div id="sample">
  <!-- The DIV for the Diagram needs an explicit size or else we won't see anything.
       Also add a border to help see the edges. -->
       <div class="bracket-container">

       </div>
  <div id="myDiagramDiv" style="border: 1px solid black; background: rgb(77, 77, 77); width: 90vw; height: 80vh; position: relative; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);"><canvas tabindex="0" width="1396" height="1196" style="position: absolute; top: 0px; left: 0px; z-index: 2; user-select: none; touch-action: none; width: 698px; height: 598px;">This text is displayed if your browser does not support the Canvas HTML element.</canvas><div style="position: absolute; overflow: auto; width: 40vw; height: 40vh; z-index: 1;"><div style="position: absolute; width: 1px; height: 1px;"></div></div></div>
  </div>
  </body>
  </html>
